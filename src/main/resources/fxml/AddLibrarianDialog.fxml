<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<?import java.lang.String?>
<VBox xmlns="http://javafx.com/javafx/24" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.library.controller.AddLibrarianDialogController"
      spacing="15" styleClass="dialog-container" minWidth="500">
    
    <padding>
        <Insets topRightBottomLeft="20"/>
    </padding>
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="12" styleClass="dialog-header">
        <Label text="ðŸ‘¤" styleClass="dialog-icon"/>
        <VBox spacing="3">
            <Label text="Register New Librarian" styleClass="dialog-title"/>
            <Label text="Add a new librarian to the system" styleClass="dialog-subtitle"/>
        </VBox>
    </HBox>
    
    <Separator styleClass="dialog-separator"/>
    
    <!-- Librarian Details Form -->
    <ScrollPane fitToWidth="true" styleClass="form-scroll-pane" 
                maxHeight="450" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
        <VBox spacing="15">
            <padding>
                <Insets right="8"/>
            </padding>
            
            <!-- Personal Information Section -->
            <Label text="ðŸ‘¨â€ðŸ’¼ Personal Information" styleClass="section-header-with-icon"/>
            
            <!-- Employee ID -->
            <VBox spacing="6">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Username" styleClass="field-label"/>
                    <Label text="*" styleClass="required-indicator"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="ðŸ†”" styleClass="field-icon"/>
                    <TextField fx:id="employeeIdField" promptText="e.g., LIB-001"
                              HBox.hgrow="ALWAYS" styleClass="form-text-field"/>
                </HBox>
                <Label fx:id="employeeIdError" styleClass="error-label" managed="false" visible="false"/>
                <Label text="ðŸ’¡ This will be used as the librarian's login username" styleClass="hint-text"/>
            </VBox>
            
            <!-- Full Name -->
            <VBox spacing="6">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Full Name" styleClass="field-label"/>
                    <Label text="*" styleClass="required-indicator"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="âœï¸" styleClass="field-icon"/>
                    <TextField fx:id="fullNameField" promptText="Enter full name"
                              HBox.hgrow="ALWAYS" styleClass="form-text-field"/>
                </HBox>
                <Label fx:id="fullNameError" styleClass="error-label" managed="false" visible="false"/>
            </VBox>
            
            <!-- Email -->
            <VBox spacing="6">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Email Address" styleClass="field-label"/>
                    <Label text="*" styleClass="required-indicator"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="ðŸ“§" styleClass="field-icon"/>
                    <TextField fx:id="emailField" promptText="librarian@library.com"
                              HBox.hgrow="ALWAYS" styleClass="form-text-field"/>
                </HBox>
                <Label fx:id="emailError" styleClass="error-label" managed="false"/>
            </VBox>
            
            <!-- Phone Number -->
            <VBox spacing="6">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Phone Number" styleClass="field-label"/>
                    <Label text="*" styleClass="required-indicator"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="ðŸ“±" styleClass="field-icon"/>
                    <TextField fx:id="phoneField" promptText="(+260) 987654321"
                              HBox.hgrow="ALWAYS" styleClass="form-text-field"/>
                </HBox>
                <Label fx:id="phoneError" styleClass="error-label" managed="false" visible="false"/>
            </VBox>
            
            <!-- Address -->
            <VBox spacing="6">
                <Label text="Address (Optional)" styleClass="field-label"/>
                <HBox spacing="8" alignment="TOP_LEFT">
                    <Label text="ðŸ " styleClass="field-icon">
                        <padding>
                            <Insets top="10"/>
                        </padding>
                    </Label>
                    <TextArea fx:id="addressField" promptText="Enter address..." 
                             prefRowCount="2" wrapText="true"
                             HBox.hgrow="ALWAYS" styleClass="form-text-area"/>
                </HBox>
            </VBox>
            
            <Separator styleClass="section-divider"/>
            
            <!-- Account Credentials Section -->
            <Label text="ðŸ” Account Credentials" styleClass="section-header-with-icon"/>
            
            <!-- Initial Password -->
            <VBox spacing="6">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Create Password" styleClass="field-label"/>
                    <Label text="*" styleClass="required-indicator"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="ðŸ”‘" styleClass="field-icon"/>
                    <PasswordField fx:id="passwordField" promptText="Create initial password"
                                  HBox.hgrow="ALWAYS" styleClass="form-password-field"/>
                </HBox>
                <Label fx:id="passwordError" styleClass="error-label" managed="false" visible="false"/>
                <Label text="ðŸ’¡ Password must be at least 8 characters" styleClass="hint-text"/>
            </VBox>
            
            <!-- Confirm Password -->
            <VBox spacing="6">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Confirm Password" styleClass="field-label"/>
                    <Label text="*" styleClass="required-indicator"/>
                </HBox>
                <HBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="ðŸ”’" styleClass="field-icon"/>
                    <PasswordField fx:id="confirmPasswordField" promptText="Re-enter password"
                                  HBox.hgrow="ALWAYS" styleClass="form-password-field"/>
                </HBox>
                <Label fx:id="confirmPasswordError" styleClass="error-label" managed="false" visible="false"/>
            </VBox>
            
            <Separator styleClass="section-divider"/>
            
            <!-- Access Level / Permissions -->
            <VBox spacing="8">
                <Label text="âš™ï¸ Access Permissions" styleClass="section-header-with-icon"/>
                <VBox spacing="10" styleClass="permissions-container">
                    <padding>
                        <Insets topRightBottomLeft="12"/>
                    </padding>
                    
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <Label text="âœ“" styleClass="permission-icon"/>
                        <CheckBox fx:id="canApproveRequestsCheckbox" text="Can approve borrow requests" 
                                 selected="true" styleClass="permission-checkbox"/>
                    </HBox>
                    
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <Label text="âœ“" styleClass="permission-icon"/>
                        <CheckBox fx:id="canIssueReturnsCheckbox" text="Can issue and return books" 
                                 selected="true" styleClass="permission-checkbox"/>
                    </HBox>
                    
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <Label text="âš ï¸" styleClass="permission-icon-warning"/>
                        <CheckBox fx:id="canRevokeMembershipCheckbox" text="Can revoke memberships" 
                                 selected="false" styleClass="permission-checkbox"/>
                    </HBox>
                </VBox>
                <Label text="ðŸ’¡ Default permissions are recommended for standard librarians" styleClass="hint-text"/>
            </VBox>
        </VBox>
    </ScrollPane>
    
    <!-- General Error/Success Message -->
    <Label fx:id="generalMessage" wrapText="true" managed="false" visible="false" 
           styleClass="message-label"/>
    
    <!-- Required Fields Note -->
    <HBox spacing="5" alignment="CENTER_LEFT" styleClass="required-note">
        <Label text="*" styleClass="required-indicator"/>
        <Label text="Required fields" styleClass="hint-text"/>
    </HBox>
    
    <!-- Action Buttons -->
    <HBox spacing="10" alignment="CENTER_RIGHT" styleClass="dialog-button-bar">
        <Button fx:id="cancelButton" text="Cancel" onAction="#handleCancel"
                styleClass="dialog-cancel-button" cancelButton="true"/>
        
        <Button fx:id="registerButton" text="ðŸ‘¤ Register Librarian" onAction="#handleRegister" 
                defaultButton="true" styleClass="dialog-primary-button"/>
    </HBox>
    
    <stylesheets>
        <String fx:value="/styles.css"/>
    </stylesheets>
</VBox>

