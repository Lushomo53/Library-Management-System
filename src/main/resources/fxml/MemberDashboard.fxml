<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.lang.*?>
<?import javafx.collections.FXCollections?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<BorderPane xmlns="http://javafx.com/javafx/24" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.library.controller.MemberDashboardController"
            styleClass="dashboard-root">
    
    <!-- Top Navigation Bar -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="top-bar">
            <padding>
                <Insets top="12" right="20" bottom="12" left="20"/>
            </padding>
            <ImageView preserveRatio="true"
                       styleClass="logo-dashboard">
                <Image url="/images/logo.png"/>
            </ImageView>
            <Label text="Member Dashboard" styleClass="dashboard-title"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label fx:id="welcomeLabel" text="Welcome, Member!" styleClass="welcome-label"/>
            <Button fx:id="logoutButton" text="Logout" onAction="#handleLogout" styleClass="logout-button"/>
        </HBox>
    </top>
    
    <!-- Main Content Area with ScrollPane -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: #FAFAFA; -fx-background: #FAFAFA;" hbarPolicy="NEVER">
            <content>
                <VBox spacing="20" style="-fx-background-color: #FAFAFA;">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <!-- Search Section -->
                    <VBox spacing="12" styleClass="content-card">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <Label text="Search Library Catalog" styleClass="section-title"/>
                        
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <TextField fx:id="searchField" promptText="Search by title, author, ISBN..." HBox.hgrow="ALWAYS"/>
                            
                            <ComboBox fx:id="searchCategoryCombo" promptText="Category" prefWidth="150">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="All"/>
                                        <String fx:value="Fiction"/>
                                        <String fx:value="Non-Fiction"/>
                                        <String fx:value="Science"/>
                                        <String fx:value="History"/>
                                        <String fx:value="Technology"/>
                                    </FXCollections>
                                </items>
                            </ComboBox>
                            
                            <Button fx:id="searchButton" text="Search" onAction="#handleSearch" styleClass="primary-button"/>
                        </HBox>
                    </VBox>
                    
                    <!-- Statistics Cards -->
                    <HBox spacing="15">
                        <VBox spacing="6" HBox.hgrow="ALWAYS" styleClass="stat-card">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            <Label text="Books Borrowed" styleClass="stat-label"/>
                            <Label fx:id="borrowedCountLabel" text="0" styleClass="stat-value"/>
                        </VBox>
                        
                        <VBox spacing="6" HBox.hgrow="ALWAYS" styleClass="stat-card">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            <Label text="Pending Requests" styleClass="stat-label"/>
                            <Label fx:id="pendingRequestsLabel" text="0" styleClass="stat-value"/>
                        </VBox>
                        
                        <VBox spacing="6" HBox.hgrow="ALWAYS" styleClass="stat-card">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>
                            <Label text="Overdue Books" styleClass="stat-label"/>
                            <Label fx:id="overdueCountLabel" text="0" styleClass="stat-value-danger"/>
                        </VBox>
                    </HBox>
                    
                    <!-- Available Books Table -->
                    <VBox spacing="12" VBox.vgrow="ALWAYS" styleClass="content-card">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="Available Books" styleClass="section-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button fx:id="refreshButton" text="Refresh" onAction="#handleRefresh" styleClass="secondary-button"/>
                        </HBox>
                        
                        <TableView fx:id="booksTable" VBox.vgrow="ALWAYS" prefHeight="250">
                            <columns>
                                <TableColumn fx:id="isbnColumn" text="ISBN" prefWidth="100"/>
                                <TableColumn fx:id="titleColumn" text="Title" prefWidth="250"/>
                                <TableColumn fx:id="authorColumn" text="Author" prefWidth="180"/>
                                <TableColumn fx:id="categoryColumn" text="Category" prefWidth="120"/>
                                <TableColumn fx:id="availabilityColumn" text="Available" prefWidth="100"/>
                                <TableColumn fx:id="actionColumn" text="Action" prefWidth="100"/>
                            </columns>
                        </TableView>
                    </VBox>
                    
                    <!-- My Borrowed Books Section -->
                    <VBox spacing="12" styleClass="content-card">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <Label text="My Borrowed Books" styleClass="section-title"/>
                        
                        <TableView fx:id="borrowedBooksTable" prefHeight="180">
                            <columns>
                                <TableColumn fx:id="borrowedTitleColumn" text="Title" prefWidth="250"/>
                                <TableColumn fx:id="borrowedDateColumn" text="Borrowed Date" prefWidth="150"/>
                                <TableColumn fx:id="dueDateColumn" text="Due Date" prefWidth="150"/>
                                <TableColumn fx:id="statusColumn" text="Status" prefWidth="120"/>
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>
    
    <stylesheets>
        <String fx:value="/styles.css"/>
    </stylesheets>
</BorderPane>