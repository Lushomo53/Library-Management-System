<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<?import java.lang.String?>
<VBox xmlns="http://javafx.com/javafx/24" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.library.controller.MembershipApplicationController"
      alignment="TOP_CENTER" spacing="15"
      style="-fx-background-color: linear-gradient(to bottom, #FFFFFF 0%, #FFF5EE 100%);">

    <padding>
        <Insets top="20" right="30" bottom="20" left="30"/>
    </padding>

    <!-- Header Section (Fixed at top) -->
    <VBox alignment="CENTER" spacing="6">
        <Label text="ðŸ“" style="-fx-font-size: 40px;"/>
        <Label text="Membership Application" styleClass="title-label">
            <font>
                <Font name="System Bold" size="22"/>
            </font>
        </Label>
        <Label text="Join our library community today" styleClass="subtitle-label"/>
    </VBox>

    <!-- CENTERED FORM USING GRIDPANE -->
    <GridPane VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
        <columnConstraints>
            <ColumnConstraints hgrow="ALWAYS" minWidth="0.0"/>
            <ColumnConstraints hgrow="NEVER" maxWidth="500" prefWidth="500"/>
            <ColumnConstraints hgrow="ALWAYS" minWidth="0.0"/>
        </columnConstraints>

        <ScrollPane GridPane.columnIndex="1"
                    fitToWidth="true"
                    style="-fx-background-color: transparent; -fx-background: transparent;"
                    maxHeight="500"
                    hbarPolicy="NEVER">
            <content>
                <!-- Application Form -->
                <VBox spacing="15" styleClass="form-container" alignment="TOP_CENTER">
                    <padding>
                        <Insets top="25" right="25" bottom="25" left="25"/>
                    </padding>

                    <Label text="Personal Information" styleClass="section-header"/>

                    <!-- Full Name -->
                    <VBox spacing="6">
                        <Label text="Full Name *" styleClass="field-label"/>
                        <TextField fx:id="fullNameField" promptText="Enter your full name" onAction="#handleFullNameField"/>
                        <Label fx:id="fullNameError" styleClass="error-label" managed="false" visible="false"/>
                    </VBox>

                    <!-- Email -->
                    <VBox spacing="6">
                        <Label text="Email Address *" styleClass="field-label"/>
                        <TextField fx:id="emailField" promptText="your.email@example.com" onAction="#handleEmailField"/>
                        <Label fx:id="emailError" styleClass="error-label" managed="false" visible="false"/>
                    </VBox>

                    <!-- Phone Number -->
                    <VBox spacing="6">
                        <Label text="Phone Number *" styleClass="field-label"/>
                        <TextField fx:id="phoneField" promptText="097 1234567" onAction="#handlePhoneField"/>
                        <Label fx:id="phoneError" styleClass="error-label" managed="false" visible="false"/>
                    </VBox>

                    <!-- Address -->
                    <VBox spacing="6">
                        <Label text="Address *" styleClass="field-label"/>
                        <TextArea fx:id="addressField" promptText="Enter your full address" prefRowCount="2"/>
                        <Label fx:id="addressError" styleClass="error-label" managed="false" visible="false"/>
                    </VBox>

                    <Separator style="-fx-padding: 5 0;"/>

                    <Label text="Account Credentials" styleClass="section-header"/>

                    <!-- Username -->
                    <VBox spacing="6">
                        <Label text="Desired Username *" styleClass="field-label"/>
                        <TextField fx:id="usernameField" promptText="Choose a username" onAction="#handleUsernameField"/>
                        <Label fx:id="usernameError" styleClass="error-label" managed="false" visible="false"/>
                    </VBox>

                    <!-- Password -->
                    <VBox spacing="6">
                        <Label text="Password *" styleClass="field-label"/>
                        <PasswordField fx:id="passwordField" promptText="Create a strong password" onAction="#handlePasswordField"/>
                        <Label fx:id="passwordError" styleClass="error-label" managed="false" visible="false"/>
                        <Label text="Password must be at least 8 characters" styleClass="hint-label"/>
                    </VBox>

                    <!-- Confirm Password -->
                    <VBox spacing="6">
                        <Label text="Confirm Password *" styleClass="field-label"/>
                        <PasswordField fx:id="confirmPasswordField" promptText="Re-enter your password" onAction="#handleConfirmPasswordField"/>
                        <Label fx:id="confirmPasswordError" styleClass="error-label" managed="false" visible="false"/>
                    </VBox>

                    <!-- General Success/Error Message -->
                    <Label fx:id="generalMessage" wrapText="true" managed="false" visible="false"/>

                    <!-- Action Buttons -->
                    <HBox spacing="12" alignment="CENTER" style="-fx-padding: 10 0 0 0;">
                        <Button fx:id="submitButton" text="Submit Application" onAction="#handleSubmit"
                                HBox.hgrow="ALWAYS" maxWidth="Infinity" styleClass="primary-button"/>

                        <Button fx:id="cancelButton" text="Cancel" onAction="#handleCancel"
                                HBox.hgrow="ALWAYS" maxWidth="Infinity" styleClass="secondary-button"/>
                    </HBox>

                    <!-- Back to Login -->
                    <HBox alignment="CENTER" spacing="5" style="-fx-padding: 5 0 0 0;">
                        <Label text="Already have an account?" styleClass="hint-label"/>
                        <Hyperlink fx:id="backToLoginLink" text="Back to Login" onAction="#handleBackToLogin"/>
                    </HBox>
                </VBox>
            </content>
        </ScrollPane>
    </GridPane>

    <stylesheets>
        <String fx:value="/styles.css"/>
    </stylesheets>
</VBox>